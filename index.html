<!DOCTYPE html>
<html lang="tr">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Soru Defteri</title>
		<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéØ</text></svg>">
		<!-- PDF Olu≈üturma K√ºt√ºphaneleri -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				min-height: 100vh;
				padding: 20px;
			}

			.container {
				max-width: 1200px;
				margin: 0 auto;
				background: white;
				border-radius: 20px;
				box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
				overflow: hidden;
			}

			.header {
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
				padding: 30px;
				text-align: center;
				position: relative;
				overflow: hidden;
			}

			.header::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="80" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="60" r="1" fill="rgba(255,255,255,0.1)"/></svg>');
			}

			.header h1 {
				font-size: 2.5rem;
				font-weight: 700;
				margin-bottom: 10px;
				position: relative;
				z-index: 1;
			}

			.header p {
				font-size: 1.1rem;
				opacity: 0.9;
				position: relative;
				z-index: 1;
			}

			.main-content {
				padding: 40px;
			}

			.add-section {
				background: #f8f9fa;
				border-radius: 15px;
				padding: 30px;
				margin-bottom: 30px;
				border: 2px dashed #dee2e6;
				transition: all 0.3s ease;
			}

			.add-section:hover {
				border-color: #667eea;
				background: #f0f2ff;
			}

			.form-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
				gap: 20px;
				margin-bottom: 20px;
			}

			.form-group {
				display: flex;
				flex-direction: column;
			}

			.form-group label {
				font-weight: 600;
				margin-bottom: 8px;
				color: #495057;
				font-size: 0.9rem;
			}

			.form-group input,
			.form-group select,
			.form-group textarea {
				padding: 12px 15px;
				border: 2px solid #e9ecef;
				border-radius: 10px;
				font-size: 1rem;
				transition: all 0.3s ease;
				background: white;
			}

			.form-group input:focus,
			.form-group select:focus,
			.form-group textarea:focus {
				outline: none;
				border-color: #667eea;
				box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
			}

			.file-upload {
				position: relative;
				overflow: hidden;
				display: inline-block;
				width: 100%;
			}

			.file-upload input[type='file'] {
				position: absolute;
				left: -9999px;
			}

			.file-upload-btn {
				background: #667eea;
				color: white;
				padding: 12px 20px;
				border-radius: 10px;
				cursor: pointer;
				display: block;
				text-align: center;
				transition: all 0.3s ease;
				border: none;
				width: 100%;
			}

			.file-upload-btn:hover {
				background: #5a6fd8;
				transform: translateY(-2px);
			}

			.add-btn {
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
				border: none;
				padding: 15px 30px;
				border-radius: 10px;
				font-size: 1rem;
				font-weight: 600;
				cursor: pointer;
				transition: all 0.3s ease;
				width: 100%;
			}

			.add-btn:hover {
				transform: translateY(-2px);
				box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
			}

			.filters {
				display: flex;
				gap: 15px;
				margin-bottom: 30px;
				flex-wrap: wrap;
				align-items: center;
			}

			.filter-group {
				display: flex;
				align-items: center;
				gap: 8px;
			}

			.filter-group select {
				padding: 8px 12px;
				border: 2px solid #e9ecef;
				border-radius: 8px;
				font-size: 0.9rem;
			}

			.stats {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
				gap: 15px;
				margin-bottom: 30px;
			}

			.stat-card {
				background: white;
				border-radius: 12px;
				padding: 20px;
				text-align: center;
				border: 2px solid #e9ecef;
				transition: all 0.3s ease;
			}

			.stat-card:hover {
				border-color: #667eea;
				transform: translateY(-2px);
			}

			.stat-number {
				font-size: 2rem;
				font-weight: 700;
				color: #667eea;
				display: block;
			}

			.stat-label {
				color: #6c757d;
				font-size: 0.9rem;
				margin-top: 5px;
			}

			.questions-grid {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
				gap: 20px;
			}

			.question-card {
				background: white;
				border-radius: 15px;
				padding: 20px;
				border: 2px solid #e9ecef;
				transition: all 0.3s ease;
				position: relative;
				overflow: hidden;
			}

			.question-card:hover {
				transform: translateY(-5px);
				box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
			}

			.question-card::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 4px;
				background: linear-gradient(90deg, #667eea, #764ba2);
			}

			.question-status {
				position: absolute;
				top: 15px;
				right: 15px;
				padding: 5px 12px;
				border-radius: 20px;
				font-size: 0.8rem;
				font-weight: 600;
			}

			.status-beklemede {
				background: #ffebee;
				color: #c62828;
			}

			.status-cozuldu {
				background: #e8f5e8;
				color: #2e7d32;
			}

			.status-yarim {
				background: #fff3e0;
				color: #ef6c00;
			}

			.question-image {
				width: 100%;
				height: 200px;
				object-fit: cover;
				border-radius: 10px;
				margin-bottom: 15px;
				cursor: pointer;
				transition: all 0.3s ease;
			}

			.question-image:hover {
				transform: scale(1.02);
			}

			.question-meta {
				display: flex;
				justify-content: space-between;
				margin-bottom: 10px;
				font-size: 0.9rem;
				color: #6c757d;
			}

			.question-tags {
				display: flex;
				gap: 8px;
				margin-bottom: 10px;
				flex-wrap: wrap;
			}

			.tag {
				background: #667eea;
				color: white;
				padding: 4px 10px;
				border-radius: 20px;
				font-size: 0.8rem;
				font-weight: 500;
			}

			.question-actions {
				display: flex;
				gap: 10px;
				margin-top: 15px;
			}

			.action-btn {
				padding: 8px 15px;
				border: none;
				border-radius: 8px;
				font-size: 0.8rem;
				font-weight: 600;
				cursor: pointer;
				transition: all 0.3s ease;
				flex: 1;
			}

			.btn-solve {
				background: #28a745;
				color: white;
			}

			.btn-delete {
				background: #dc3545;
				color: white;
			}

			.btn-solve:hover {
				background: #218838;
			}

			.btn-delete:hover {
				background: #c82333;
			}

			.modal {
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.8);
				z-index: 1000;
				align-items: center;
				justify-content: center;
			}

			.modal.show {
				display: flex;
			}

			.modal-content {
				max-width: 90%;
				max-height: 90%;
				border-radius: 15px;
				position: relative;
			}

			.modal-content img {
				width: 100%;
				height: auto;
				border-radius: 15px;
			}

			.modal-close {
				position: absolute;
				top: -10px;
				right: -10px;
				background: white;
				border: none;
				border-radius: 50%;
				width: 40px;
				height: 40px;
				font-size: 1.5rem;
				cursor: pointer;
				color: #333;
			}

			.empty-state {
				text-align: center;
				padding: 60px 20px;
				color: #6c757d;
			}

			.empty-state i {
				font-size: 4rem;
				margin-bottom: 20px;
				color: #dee2e6;
			}

			@media (max-width: 768px) {
				.main-content {
					padding: 20px;
				}

				.form-grid {
					grid-template-columns: 1fr;
				}

				.filters {
					flex-direction: column;
					align-items: stretch;
				}

				.questions-grid {
					grid-template-columns: 1fr;
				}

				.header h1 {
					font-size: 2rem;
				}
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="header">
				<h1>üéØ Soru Defteri</h1>
				<p>√á√∂z√ºlemeyen sorularƒ±nƒ±zƒ± takip edin, ba≈üarƒ±nƒ±zƒ± artƒ±rƒ±n!</p>
				<div style="margin-top: 15px; font-size: 0.9rem; opacity: 0.8">üì± T√ºm verileriniz g√ºvenli ≈üekilde tarayƒ±cƒ±nƒ±zda saklanƒ±r</div>
			</div>

			<div class="main-content">
				<!-- Soru Ekleme B√∂l√ºm√º -->
				<div class="add-section">
					<h2 style="margin-bottom: 20px; color: #495057">üìù Yeni Soru Ekle</h2>
					<div class="form-grid">
						<div class="form-group">
							<label>Sƒ±nav Oturumu</label>
							<select id="sinav">
								<option value="">Se√ßiniz</option>
								<option value="TYT">TYT</option>
								<option value="AYT">AYT</option>
								<option value="MS√ú">MS√ú</option>
								<option value="DGS">DGS</option>
							</select>
						</div>
						<div class="form-group">
							<label>Bran≈ü</label>
							<select id="brans">
								<option value="">Se√ßiniz</option>
								<option value="Matematik">Matematik</option>
								<option value="Fizik">Fizik</option>
								<option value="Kimya">Kimya</option>
								<option value="Biyoloji">Biyoloji</option>
								<option value="T√ºrk√ße">T√ºrk√ße</option>
								<option value="Tarih">Tarih</option>
								<option value="Coƒürafya">Coƒürafya</option>
								<option value="Felsefe">Felsefe</option>
								<option value="Din K√ºlt√ºr√º">Din K√ºlt√ºr√º</option>
								<option value="Fen Bilimleri">Fen Bilimleri</option>
								<option value="Sosyal Bilimler">Sosyal Bilimler</option>
							</select>
						</div>
						<div class="form-group">
							<label>Konu</label>
							<input type="text" id="konu" placeholder="√ñrn: Fonksiyonlar, T√ºrev..." />
						</div>
						<div class="form-group">
							<label>Durum</label>
							<select id="durum">
								<option value="Beklemede">Beklemede</option>
								<option value="Yarƒ±m √á√∂z√ºld√º">Yarƒ±m √á√∂z√ºld√º</option>
								<option value="√á√∂z√ºld√º">√á√∂z√ºld√º</option>
							</select>
						</div>
					</div>
					<div class="form-grid">
						<div class="form-group">
							<label>Soru G√∂rseli</label>
							<div class="file-upload">
								<input type="file" id="soru-file" accept="image/*" />
								<label for="soru-file" class="file-upload-btn"> üì∑ G√∂rsel Se√ß </label>
							</div>
						</div>
						<div class="form-group">
							<label>Notlar (ƒ∞steƒüe baƒülƒ±)</label>
							<textarea id="notlar" placeholder="Bu soruyla ilgili notlarƒ±nƒ±z..." rows="3"></textarea>
						</div>
					</div>
					<div style="display: flex; gap: 10px; flex-wrap: wrap;">
						<button class="add-btn" onclick="addQuestion()" style="flex: 1">‚ûï Soru Ekle</button>
						<button class="add-btn" onclick="exportData()" style="background: #28a745; flex-basis: 150px;">üì• Dƒ±≈üa Aktar</button>
						<input type="file" id="import-file" accept=".json" style="display: none" onchange="importData()" />
						<button class="add-btn" onclick="document.getElementById('import-file').click()" style="background: #ffc107; color: #333; flex-basis: 150px;">üì§ ƒ∞√ße Aktar</button>
						<button class="add-btn" onclick="exportToPDF()" style="background: #dc3545; flex-basis: 150px;">üìÑ PDF Aktar</button>
					</div>
				</div>

				<!-- ƒ∞statistikler -->
				<div class="stats">
					<div class="stat-card">
						<span class="stat-number" id="total-questions">0</span>
						<div class="stat-label">Toplam Soru</div>
					</div>
					<div class="stat-card">
						<span class="stat-number" id="pending-questions">0</span>
						<div class="stat-label">Bekleyen</div>
					</div>
					<div class="stat-card">
						<span class="stat-number" id="solved-questions">0</span>
						<div class="stat-label">√á√∂z√ºlen</div>
					</div>
					<div class="stat-card">
						<span class="stat-number" id="partial-questions">0</span>
						<div class="stat-label">Yarƒ±m √á√∂z√ºlen</div>
					</div>
				</div>

				<!-- Filtreler -->
				<div class="filters">
					<div class="filter-group">
						<label>Sƒ±nav:</label>
						<select id="filter-sinav" onchange="filterQuestions()">
							<option value="">T√ºm√º</option>
							<option value="TYT">TYT</option>
							<option value="AYT">AYT</option>
							<option value="MS√ú">MS√ú</option>
							<option value="DGS">DGS</option>
						</select>
					</div>
					<div class="filter-group">
						<label>Bran≈ü:</label>
						<select id="filter-brans" onchange="filterQuestions()">
							<option value="">T√ºm√º</option>
							<option value="Matematik">Matematik</option>
							<option value="Fizik">Fizik</option>
							<option value="Kimya">Kimya</option>
							<option value="Biyoloji">Biyoloji</option>
							<option value="T√ºrk√ße">T√ºrk√ße</option>
							<option value="Tarih">Tarih</option>
							<option value="Coƒürafya">Coƒürafya</option>
						</select>
					</div>
					<div class="filter-group">
						<label>Durum:</label>
						<select id="filter-durum" onchange="filterQuestions()">
							<option value="">T√ºm√º</option>
							<option value="Beklemede">Beklemede</option>
							<option value="Yarƒ±m √á√∂z√ºld√º">Yarƒ±m √á√∂z√ºld√º</option>
							<option value="√á√∂z√ºld√º">√á√∂z√ºld√º</option>
						</select>
					</div>
				</div>

				<!-- Sorular -->
				<div id="questions-container" class="questions-grid">
					<!-- JS ile doldurulacak -->
				</div>
			</div>
		</div>

		<!-- Modal -->
		<div id="image-modal" class="modal" onclick="closeModal()">
			<div class="modal-content" onclick="event.stopPropagation()">
				<button class="modal-close" onclick="closeModal()">√ó</button>
				<img id="modal-image" src="" alt="Soru G√∂rseli" />
			</div>
		</div>

		<script>
			let questions = JSON.parse(localStorage.getItem('yksQuestions')) || [];
			let questionId = parseInt(localStorage.getItem('yksQuestionId')) || 1;

			function addQuestion() {
				const sinav = document.getElementById('sinav').value;
				const brans = document.getElementById('brans').value;
				const konu = document.getElementById('konu').value;
				const durum = document.getElementById('durum').value;
				const notlar = document.getElementById('notlar').value;
				const fileInput = document.getElementById('soru-file');

				if (!sinav || !brans || !konu) {
					alert('L√ºtfen t√ºm zorunlu alanlarƒ± doldurun!');
					return;
				}

				if (fileInput.files.length === 0) {
					alert('L√ºtfen bir soru g√∂rseli se√ßin!');
					return;
				}

				const file = fileInput.files[0];
				const reader = new FileReader();

				reader.onload = function (e) {
					const question = {
						id: questionId++,
						sinav: sinav,
						brans: brans,
						konu: konu,
						durum: durum,
						notlar: notlar,
						image: e.target.result,
						filename: file.name,
						date: new Date().toLocaleDateString('tr-TR'),
					};

					questions.push(question);
					saveData();
					filterQuestions();
					updateStats();
					clearForm();

					alert('Soru ba≈üarƒ±yla eklendi! üéâ');
				};

				reader.readAsDataURL(file);
			}

			function clearForm() {
				document.getElementById('sinav').value = '';
				document.getElementById('brans').value = '';
				document.getElementById('konu').value = '';
				document.getElementById('durum').value = 'Beklemede';
				document.getElementById('notlar').value = '';
				document.getElementById('soru-file').value = '';
			}

			function displayQuestions(questionList) {
				const container = document.getElementById('questions-container');

				if (questionList.length === 0) {
                    if(questions.length > 0){
                        container.innerHTML = `
                        <div class="empty-state">
                            <div style="font-size: 4rem; margin-bottom: 20px;">üîç</div>
                            <h3>Filtreye uygun soru bulunamadƒ±</h3>
                            <p>Farklƒ± filtre se√ßeneklerini deneyin.</p>
                        </div>`;
                    } else {
                        container.innerHTML = `
                        <div class="empty-state">
                            <div style="font-size: 4rem; margin-bottom: 20px;">üìö</div>
                            <h3>Hen√ºz soru eklenmemi≈ü</h3>
                            <p>Yukarƒ±daki formu kullanarak ilk sorunuzu ekleyin!</p>
                        </div>`;
                    }
					return;
				}

				let html = '';
				questionList.forEach((question) => {
					const statusClass = question.durum === 'Beklemede' ? 'status-beklemede' : question.durum === '√á√∂z√ºld√º' ? 'status-cozuldu' : 'status-yarim';
					const toggleButtonText = question.durum === '√á√∂z√ºld√º' ? 'üîÑ Durumu Deƒüi≈ütir' : '‚úÖ √á√∂z√ºld√º';
                    
					html += `
                    <div class="question-card">
                        <div class="question-status ${statusClass}">${question.durum}</div>
                        <img src="${question.image}" alt="Soru ${question.id}" class="question-image" onclick="openModal('${question.image}')">
                        <div class="question-meta">
                            <span><strong>ID:</strong> ${question.id}</span>
                            <span><strong>Tarih:</strong> ${question.date}</span>
                        </div>
                        <div class="question-tags">
                            <span class="tag">${question.sinav}</span>
                            <span class="tag">${question.brans}</span>
                            <span class="tag">${question.konu}</span>
                        </div>
                        ${question.notlar ? `<p style="color: #6c757d; font-size: 0.9rem; margin: 10px 0;"><strong>Not:</strong> ${question.notlar}</p>` : ''}
                        <div class="question-actions">
                            <button class="action-btn btn-solve" onclick="toggleStatus(${question.id})">${toggleButtonText}</button>
                            <button class="action-btn btn-delete" onclick="deleteQuestion(${question.id})">üóëÔ∏è Sil</button>
                        </div>
                    </div>`;
				});

				container.innerHTML = html;
			}

			function filterQuestions() {
				const sinavFilter = document.getElementById('filter-sinav').value;
				const bransFilter = document.getElementById('filter-brans').value;
				const durumFilter = document.getElementById('filter-durum').value;

				const filtered = questions.filter((q) => {
					return (!sinavFilter || q.sinav === sinavFilter) && (!bransFilter || q.brans === bransFilter) && (!durumFilter || q.durum === durumFilter);
				});

				displayQuestions(filtered);
			}

			function toggleStatus(id) {
				const question = questions.find((q) => q.id === id);
				if (question) {
					const statuses = ['Beklemede', 'Yarƒ±m √á√∂z√ºld√º', '√á√∂z√ºld√º'];
					const currentIndex = statuses.indexOf(question.durum);
					const nextIndex = (currentIndex + 1) % statuses.length;
					question.durum = statuses[nextIndex];

					saveData();
					filterQuestions();
					updateStats();
				}
			}

			function deleteQuestion(id) {
				if (confirm('Bu soruyu silmek istediƒüinizden emin misiniz?')) {
					questions = questions.filter((q) => q.id !== id);
					saveData();
					filterQuestions();
					updateStats();
				}
			}

			function openModal(imageSrc) {
				document.getElementById('modal-image').src = imageSrc;
				document.getElementById('image-modal').classList.add('show');
			}

			function closeModal() {
				document.getElementById('image-modal').classList.remove('show');
			}

			function updateStats() {
				document.getElementById('total-questions').textContent = questions.length;
				document.getElementById('pending-questions').textContent = questions.filter((q) => q.durum === 'Beklemede').length;
				document.getElementById('solved-questions').textContent = questions.filter((q) => q.durum === '√á√∂z√ºld√º').length;
				document.getElementById('partial-questions').textContent = questions.filter((q) => q.durum === 'Yarƒ±m √á√∂z√ºld√º').length;
			}

			function saveData() {
				localStorage.setItem('yksQuestions', JSON.stringify(questions));
				localStorage.setItem('yksQuestionId', questionId.toString());
			}

			document.addEventListener('DOMContentLoaded', function () {
				filterQuestions();
				updateStats();
			});

			document.addEventListener('keydown', function (e) {
				if (e.key === 'Escape') {
					closeModal();
				}
			});

			function exportData() {
				if (questions.length === 0) {
                    alert('Dƒ±≈üa aktarƒ±lacak soru bulunmuyor.');
                    return;
                }
				const data = {
					questions: questions,
					questionId: questionId,
					exportDate: new Date().toISOString(),
					version: '1.0',
				};

				const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
				const url = URL.createObjectURL(blob);
				const a = document.createElement('a');
				a.href = url;
				a.download = `soru-defteri-yedek-${new Date().toLocaleDateString('tr-TR').replace(/\./g, '-')}.json`;
				document.body.appendChild(a);
				a.click();
				document.body.removeChild(a);
				URL.revokeObjectURL(url);
				alert('Verileriniz ba≈üarƒ±yla dƒ±≈üa aktarƒ±ldƒ±! üíæ');
			}

			function importData() {
				const fileInput = document.getElementById('import-file');
				const file = fileInput.files[0];
				if (!file) return;

				const reader = new FileReader();
				reader.onload = function (e) {
					try {
						const data = JSON.parse(e.target.result);
						if (data.questions && Array.isArray(data.questions)) {
							if (questions.length > 0 && !confirm('Mevcut verileriniz silinecek. Devam etmek istediƒüinizden emin misiniz?')) {
								fileInput.value = '';
								return;
							}
							questions = data.questions;
							questionId = data.questionId || (questions.length > 0 ? Math.max(...questions.map(q => q.id)) + 1 : 1);
							saveData();
							filterQuestions();
							updateStats();
							alert(`${questions.length} soru ba≈üarƒ±yla i√ße aktarƒ±ldƒ±! üéâ`);
						} else {
							alert('Ge√ßersiz dosya formatƒ±!');
						}
					} catch (error) {
						alert('Dosya okunamadƒ±. L√ºtfen ge√ßerli bir yedek dosyasƒ± se√ßin.');
					} finally {
                        fileInput.value = '';
                    }
				};
				reader.readAsText(file);
			}

			// --- YENƒ∞ VE D√úZELTƒ∞LMƒ∞≈û PDF FONKSƒ∞YONU ---
			function exportToPDF() {
				const sinavFilter = document.getElementById('filter-sinav').value;
				const bransFilter = document.getElementById('filter-brans').value;
				const durumFilter = document.getElementById('filter-durum').value;
                const questionsToExport = questions.filter((q) => 
                    (!sinavFilter || q.sinav === sinavFilter) && 
                    (!bransFilter || q.brans === bransFilter) && 
                    (!durumFilter || q.durum === durumFilter)
                );

				if (questionsToExport.length === 0) {
					alert('PDF olu≈üturmak i√ßin filtrelenmi≈ü veya eklenmi≈ü soru bulunmuyor.');
					return;
				}

				const { jsPDF } = window.jspdf;
				const pdfButton = event.currentTarget;
				const originalButtonText = pdfButton.innerHTML;
				pdfButton.innerHTML = 'Olu≈üturuluyor...';
				pdfButton.disabled = true;

				const printContainer = document.createElement('div');
				printContainer.id = 'pdf-content';
				Object.assign(printContainer.style, {
					position: 'absolute',
					left: '-9999px',
					top: '0',
					width: '210mm',
					backgroundColor: 'white',
					padding: '10mm',
					boxSizing: 'border-box',
                    fontFamily: 'sans-serif'
				});
				
				let contentHTML = `
                <style>
                    .pdf-title { text-align: center; font-size: 20px; margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 10px; }
                    .pdf-card { border: 1px solid #eee; border-radius: 5px; padding: 10px; margin-bottom: 10mm; }
                    .pdf-img { max-width: 100%; border-radius: 5px; margin-bottom: 10px; }
                    .pdf-meta { font-size: 11px; color: #555; margin-bottom: 8px; }
                    .pdf-tag { display: inline-block; background-color: #f0f0f0; padding: 4px 8px; border-radius: 10px; font-size: 10px; margin-right: 5px; }
                    .pdf-notes { font-size: 12px; color: #333; background: #f9f9f9; border-left: 2px solid #667eea; padding: 8px; margin-top: 8px; word-wrap: break-word; }
                </style>
                <h1 class="pdf-title">Soru Defteri √áƒ±ktƒ±sƒ± (${new Date().toLocaleDateString('tr-TR')})</h1>`;
				
				questionsToExport.forEach(q => {
					contentHTML += `
					<div class="pdf-card">
						<div class="pdf-meta"><b>ID:</b> ${q.id} | <b>Tarih:</b> ${q.date} | <b>Durum:</b> ${q.durum}</div>
						<div><span class="pdf-tag">${q.sinav}</span><span class="pdf-tag">${q.brans}</span><span class="pdf-tag">${q.konu}</span></div>
						<img src="${q.image}" class="pdf-img">
						${q.notlar ? `<div class="pdf-notes"><b>Not:</b> ${q.notlar.replace(/\n/g, '<br>')}</div>` : ''}
					</div>`;
				});

				printContainer.innerHTML = contentHTML;
				document.body.appendChild(printContainer);

				html2canvas(printContainer, { scale: 2, useCORS: true, windowWidth: printContainer.scrollWidth, windowHeight: printContainer.scrollHeight }).then(canvas => {
					// A4 sayfasƒ± boyutlarƒ± (mm cinsinden) ve kenar bo≈üluklarƒ±
					const pageHeight = 297; 
					const pageWidth = 210;
					const margin = 10;
					
					// G√∂r√ºnt√ºn√ºn PDF'e sƒ±ƒüacak y√ºksekliƒüi ve geni≈üliƒüi
					const imgWidth = pageWidth - margin * 2;
					const imgHeight = canvas.height * imgWidth / canvas.width;
					let heightLeft = imgHeight;

					const pdf = new jsPDF('p', 'mm', 'a4');
					let position = 0;

					// ƒ∞lk sayfayƒ± ekle
					pdf.addImage(canvas, 'PNG', margin, margin, imgWidth, imgHeight);
					heightLeft -= (pageHeight - margin * 2);

					// Gerekliyse yeni sayfalar ekle
					while (heightLeft > 0) {
						position = heightLeft - imgHeight;
						pdf.addPage();
						pdf.addImage(canvas, 'PNG', margin, position, imgWidth, imgHeight);
						heightLeft -= (pageHeight - margin * 2);
					}
					
					pdf.save(`soru-defteri-${new Date().toLocaleDateString('tr-TR').replace(/\./g, '-')}.pdf`);

					document.body.removeChild(printContainer);
					pdfButton.innerHTML = originalButtonText;
					pdfButton.disabled = false;
					alert('PDF ba≈üarƒ±yla olu≈üturuldu ve indirildi! üìÑ');
				}).catch(err => {
					console.error("PDF olu≈üturma hatasƒ±:", err);
					alert("PDF olu≈üturulurken bir hata olu≈ütu. L√ºtfen konsolu kontrol edin.");
					document.body.removeChild(printContainer);
					pdfButton.innerHTML = originalButtonText;
					pdfButton.disabled = false;
				});
			}
		</script>
	</body>
</html>
